<div class="show-page">
  <nav aria-label="You are here:" role="navigation">
    <ul class="breadcrumbs">
      <li><a href="/">Home</a></li>
      <li><a href="/champions/<%=@champion.id%>"><%=@champion.name%></a></li>
      <li>
        <span class="show-for-sr">Current: </span> <%= @topic.title %>
      </li>
    </ul>
  </nav>

  <div class="topic-head small-12 medium-8 large-6">
    <% if user_signed_in? && current_user.id == @topic.user.id %>
      <ul class=" dropdown menu" style="width: 100px;" data-dropdown-menu data-click-open="true" data-disable-hover="true">
        <li>
          <a href="#">Edit</a>
          <ul class="menu"  style="width: 400px;">
            <%= render :partial => 'topics/edit', :locals => {:topic => @topic} %>
          </ul>
        </li>
        <li>
          <%= link_to "Delete", champion_topic_path(@champion, @topic), method: :delete, data: { confirm: 'Are you sure?' } %>
        </li>
      </ul>
    <% end %>

    <small>Submitted at <%= @topic.created_at %> by <%= link_to @topic.user.email, user_path(@topic.user) %></small>
    <h3><u><%= @topic.title %></u></h3>
    <h4><%= @topic.content %></h4>
  </div>


  <div class="reply-form small-12 medium-8 large-6">
    <% if user_signed_in? %>
      <%= render :partial => 'replies/form' %>
    <% else %>
       <h3>You must sign in before commenting!</h3>
       <%= render :partial => 'devise/sessions/form' %>
    <% end %>
  </div>
  <% @topic.replies.each do |reply| %>
  <div class="reply small-12 medium-8 large-6">
    <small>Submitted at <%= reply.created_at %> by <%= link_to reply.user.email, user_path(reply.user) %></small>
    <p> <%= reply.content %> <p>

      <% if user_signed_in? && current_user.id == reply.user.id %>

          <div class="button-group">
            <a class="button"><%= button_to "Delete", champion_topic_reply_path(@topic.champion, @topic, reply), method: :delete, data: { confirm: 'Are you sure?' }  %></a>
            <a class="button"><input type="submit" value="Edit" data-toggle="edit_<%=reply.id%>"></a>
              <div class="dropdown-pane top" id="edit_<%=reply.id%>" data-dropdown data-auto-focus="true">
                <%= render :partial => 'replies/edit', :locals => {:reply => reply} %>
              </div>

            </div>

      <% end %>
  </div>
  <% end %>
</div>
